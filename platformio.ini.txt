;	platformio.ini - configuration for board
;	Copyright (C) 2025 Camren Chraplak
;
;	This program is free software: you can redistribute it and/or modify
;	it under the terms of the GNU General Public License as published by
;	the Free Software Foundation, either version 3 of the License, or
;	(at your option) any later version.
;
;	This program is distributed in the hope that it will be useful,
;	but WITHOUT ANY WARRANTY; without even the implied warranty of
;	MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
;	GNU General Public License for more details.
;
;	You should have received a copy of the GNU General Public License
;	along with this program.  If not, see <https://www.gnu.org/licenses/>.

; PlatformIO Project Configuration File
;
;   Build options: build flags, source filter
;   Upload options: custom upload port, speed and extra flags
;   Library options: dependencies, extra library storages
;   Advanced options: extra scripting
;
; Please visit documentation for the other options and examples
; https://docs.platformio.org/page/projectconf.html

[platformio]
default_envs = esp32dev

[env]
platform = espressif32
board = esp32dev
framework = arduino
monitor_speed = 9600

build_flags =
	; NVM Configuration Flags
	-D __NVM_BEGIN__ ; Calls begin function for NVM
	-D __NVM_BEGIN_RETURN__ ; Checks return parameter of nvm begin

	; Version Flags
	-D OSC_BOARD_MAJOR_VERSION=0
	-D OSC_BOARD_MINOR_VERSION=2
	-D OSC_BOARD_PATCH_VERSION=0

	; Critical Flags
	-D BAUD_RATE=${this.monitor_speed} ; Sets baud rate for board

	; Extra Flags
	;-D WAIT_RUN=0 ; How long to wait for program to run in ms

lib_deps =
	https://github.com/Microcontroller-Oscilloscope/Core

[env:esp32dev]
build_type = release
test_filter = *

build_flags =
	${env.build_flags}

	; Debug Flags
	;-D __ERROR_DEBUG__ ; Debug for general error statements
	;-D __NVM_DEBUG__ ; Debug for data related to NVM

lib_deps =
	${env.lib_deps}

[env:test_env]
build_type = test
test_framework = unity

build_flags =
	${env.build_flags}

lib_deps =
	${env.lib_deps}

	https://github.com/Microcontroller-Oscilloscope/UnityTests